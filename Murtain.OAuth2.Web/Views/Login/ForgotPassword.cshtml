@model Murtain.OAuth2.Web.Models.ValidateImageCaptchaViewModel
@{
    ViewBag.Title = L("忘记密码");
    Layout = "~/Views/Shared/_Layout_Login.cshtml";
}
<form method="post" action="/Account/ForgotPasswordAction?signin=@Request["signin"]">
    @Html.AntiForgeryToken()
    <div class="form-group">
        <div class="logo-image"></div>
        <div class="title"></div>
    </div>
    <div class="form-group">
        @if (!string.IsNullOrWhiteSpace(Model?.ErrorMessage))
        {
            <span class="warningicon">@Model.ErrorMessage</span>
            <span class="error-message"></span>
        }
        <div class="input">
            <span class="icon"><i>@L("手机号/邮箱")</i></span>
            <input type="text" placeholder="@L("手机号/邮箱")" name="telphone" />
        </div>
        <div class="input password">
            <span class="icon"><i>@L("验证码")</i></span>
            <input type="text" class="captcha" placeholder="@L("验证码")" name="captcha" />
            <img class="img-captcha" src="@(GlobalSettingManager.GetSettingValue(Constants.Settings.Authorization.CaptchaAddress))" onclick="refreshCaptcha()" />
        </div>
        <div class="btn-link">
            <p class="agreement">
                <input type="checkbox" class="check-box" />
                <label class="check-lable">@L("我已阅读并同意遵守")<a href="http://murtain.imwork.net/support/#/agreement" target="_blank">@L("法律声明")</a> @L("和")<a href="http://murtain.imwork.net/support/#/privacy" target="_blank">@L("隐私条款")</a></label>
            </p>
        </div>
    </div>
    <div class="form-group">
        <div class="btn-submit">
            <input type="submit" class="btn-submit" value="@L("下一步")">
        </div>
    </div>
    <div class="line"></div>
    <div class="form-group">
        <p class="go-signin">
            <a href="{{model.endpoint.login}}" class="">@("如果您已拥有账号，则可在此") <span>@L("登录")</span></a>
        </p>
    </div>
</form>
@section scripts{
    <script language="javascript">

        function refreshCaptcha() {
            $('.img-captcha').attr('src', '@(GlobalSettingManager.GetSettingValue(Constants.Settings.Authorization.CaptchaAddress))?timespan=' + new Date().getTime());
        }
    </script>
}